# compose.override.yml
services:
    mailpit:
        image: axllent/mailpit:latest
        environment:
            TZ: ${TZ:-UTC}
        ports:
            - "8025:8025"
        expose:
            - "1025"
        profiles: ["dev"]
        tty: true
    # main runtime
    bun-node:
        image: oven/bun:alpine
        environment:
            TZ: ${TZ:-UTC}
            NODE_ENV: development
        volumes: [./src:/app]
        ports: [5173:5173]
        working_dir: /app
        user: "1000"
        profiles: ["dev"]
        tty: true
    # backup runtime (if bun fails..)
    node:
        image: node:21-alpine
        environment:
            TZ: ${TZ:-UTC}
        volumes: [./src:/app]
        ports: [8000:8000]
        working_dir: /app
        user: "1000"
        profiles: ["dev"]
        tty: true

    npm:
        extends: node
        entrypoint: ["npm", "--no-update-notifier"]

    yarn:
        extends: node
        entrypoint: ["yarn"]
